import{j as e,T as a,a as g,r as i,u,P as p}from"./index-shEYQEEx.js";import{P as y}from"./PageBreadCrumb-6Cafv5KP.js";import{B as N}from"./Badge-CiCt-D8-.js";import{C as f}from"./ComponentCard-CDuVox5A.js";import{d as j}from"./TransactionApiCaller-BDYYJa3t.js";import"./index-Dd-x5oqY.js";function b({transaction:t}){return e.jsx("div",{className:"p-5 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full border
              ${t.transactionType===a.INCOME?"border-green-500":t.transactionType===a.EXPENSE?"border-red-500":""}`,children:t.transactionType===a.INCOME?e.jsx("i",{className:"fa-solid fa-circle-dollar-to-slot text-green-500"}):t.transactionType===a.EXPENSE?e.jsx("i",{className:"fa-solid fa-wallet text-red-500"}):null}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.jsx("div",{className:"text-lg font-bold",children:t.description}),e.jsx("div",{className:"text-sm text-gray-400",children:e.jsx("b",{children:t.date&&t.date.toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"})})})]})]}),e.jsx("div",{children:e.jsxs("span",{className:`text-lg font-bold
              ${t.amount&&t.amount<0?"text-red-500":t.amount&&t.amount>0?"text-green-500":"text-gray-500"}`,children:[t.amount!==void 0&&t.amount>0?"+":"",t.amount&&t.amount.toLocaleString("vi-VN",{style:"currency",currency:"VND"})]})})]})})}function v({transaction:t}){return e.jsx("div",{className:"p-5 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6",children:e.jsx("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white/90 mb-6",children:"Thông tin chung"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3 lg:gap-7 2xl:gap-x-32",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400",children:t.transactionType===a.INCOME&&t.amount&&t.amount>0?"Khoản nhận về":"Khoản đã chi"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-white/90 text-bold",children:t.amount&&t.amount>0?e.jsxs("span",{className:"text-green-500",children:["+",t.amount.toLocaleString("vi-VN",{style:"currency",currency:"VND"})]}):t.amount&&t.amount<0?e.jsx("span",{className:"text-red-500",children:t.amount.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}):e.jsxs("span",{className:"text-gray-500",children:[t.amount," VNĐ"]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400",children:"Loại giao dịch"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-white/90",children:e.jsx(N,{size:"sm",className:t.transactionType===a.INCOME?"border-green-500":t.transactionType===a.EXPENSE?"border-red-500":"",children:t.transactionType===a.INCOME?"Thu nhập":t.transactionType===a.EXPENSE?"Chi tiêu":null})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400",children:"Bên giao dịch"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-white/90",children:t==null?void 0:t.merchant})]})]})]})})})}function S(){const t=g(),[c,n]=i.useState(!1),[r,o]=i.useState({}),{id:l}=u(),x=async()=>{try{n(!0);const d=await fetch(`/api/transactions/${l}`,{method:"GET",credentials:"include"});if(!d.ok)throw new Error("Network response was not ok");const s=await d.json();o({...s,date:s.date&&new Date(s.date),createdAt:s.createdAt&&new Date(s.createdAt),updatedAt:s.updatedAt&&new Date(s.updatedAt)}),console.log("Transaction data fetched:",s)}catch(d){console.error("Error fetching account data:",d)}finally{n(!1)}},m=()=>{t(`/transactions/${r.id}/edit`,{state:{transaction:r}})},h=async()=>{window.confirm("Bạn có chắc chắn muốn xóa giao dịch này?")&&await j(r.id).then(()=>{alert("Giao dịch đã được xóa thành công."),t("/transactions")})};return i.useEffect(()=>{x()},[]),e.jsxs(e.Fragment,{children:[e.jsx(p,{title:"Giao dịch",description:"Giao dịch tài chính"}),e.jsx(y,{pageTitles:[{title:"Giao dịch",path:"/transactions"},{title:"Chi tiết giao dịch",path:`/transactions/${l}`}]}),e.jsx("div",{className:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6",children:e.jsx("div",{className:"space-y-6",children:c?e.jsx("p",{className:"text-center text-gray-500 dark:text-white/50",children:"Đang tải dữ liệu..."}):e.jsxs(f,{title:"Chi tiết giao dịch",actions:[{actionName:"Cập nhật",action:m,icon:e.jsx("i",{className:"fa-solid fa-pencil"})},{actionName:"Xóa",action:h,icon:e.jsx("i",{className:"fa-solid fa-trash"})}],children:[e.jsx(b,{transaction:r}),e.jsx(v,{transaction:r})]})})})]})}export{S as default};
