import{j as e,T as a,r as d,a as y,P as N}from"./index-BxgI7-U7.js";import{P as f}from"./PageBreadCrumb-0XY76tqG.js";import{u as b,M as v}from"./index-DJXm7G6S.js";import{B as c}from"./Button-DLgQ9vSs.js";import{I as w}from"./InputField-CZdO6WtZ.js";import{L as E}from"./Label-C1guMAD3.js";import{B as T}from"./Badge-C7vyma6P.js";import{C as k}from"./ComponentCard-CIEmYiQn.js";import"./index-leHXWX09.js";function C({transaction:t}){return e.jsx("div",{className:"p-5 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full border
              ${t.transactionType===a.INCOME?"border-green-500":t.transactionType===a.EXPENSE?"border-red-500":""}`,children:t.transactionType===a.INCOME?e.jsx("i",{className:"fa-solid fa-circle-dollar-to-slot text-green-500"}):t.transactionType===a.EXPENSE?e.jsx("i",{className:"fa-solid fa-wallet text-red-500"}):null}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.jsx("div",{className:"text-lg font-bold",children:t.description}),e.jsx("div",{className:"text-sm text-gray-400",children:e.jsx("b",{children:t.date&&t.date.toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"})})})]})]}),e.jsx("div",{children:e.jsxs("span",{className:`text-lg font-bold
              ${t.amount&&t.amount<0?"text-red-500":t.amount&&t.amount>0?"text-green-500":"text-gray-500"}`,children:[t.amount!==void 0&&t.amount>0?"+":"",t.amount&&t.amount.toLocaleString("vi-VN",{style:"currency",currency:"VND"})]})})]})})}function M({transaction:t}){return e.jsx("div",{className:"p-5 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6",children:e.jsx("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white/90 mb-6",children:"Thông tin chung"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3 lg:gap-7 2xl:gap-x-32",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400",children:t.transactionType===a.INCOME&&t.amount&&t.amount>0?"Khoản nhận về":"Khoản đã chi"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-white/90 text-bold",children:t.amount&&t.amount>0?e.jsxs("span",{className:"text-green-500",children:["+",t.amount.toLocaleString("vi-VN",{style:"currency",currency:"VND"})]}):t.amount&&t.amount<0?e.jsx("span",{className:"text-red-500",children:t.amount.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}):e.jsxs("span",{className:"text-gray-500",children:[t.amount," VNĐ"]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400",children:"Loại giao dịch"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-white/90",children:e.jsx(T,{size:"sm",className:t.transactionType===a.INCOME?"border-green-500":t.transactionType===a.EXPENSE?"border-red-500":"",children:t.transactionType===a.INCOME?"Thu nhập":t.transactionType===a.EXPENSE?"Chi tiêu":null})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400",children:"Bên giao dịch"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-white/90",children:t==null?void 0:t.merchant})]})]})]})})})}function G(){const[t,n]=d.useState(!1),[o,x]=d.useState({}),{isOpen:m,openModal:h,closeModal:i}=b(),g=()=>{console.log("Saving changes..."),i()},{id:l}=y(),[p,u]=d.useState(l||""),j=async()=>{try{n(!0);const r=await fetch(`/api/transactions/${l}`,{method:"GET",credentials:"include"});if(!r.ok)throw new Error("Network response was not ok");const s=await r.json();x({...s,date:s.date&&new Date(s.date),createdAt:s.createdAt&&new Date(s.createdAt),updatedAt:s.updatedAt&&new Date(s.updatedAt)}),console.log("Transaction data fetched:",s)}catch(r){console.error("Error fetching account data:",r)}finally{n(!1)}};return d.useEffect(()=>{j()},[]),e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Giao dịch",description:"Giao dịch tài chính"}),e.jsx(f,{pageTitles:[{title:"Giao dịch",path:"/transactions"},{title:"Chi tiết giao dịch",path:`/transactions/${l}`}]}),e.jsx("div",{className:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6",children:e.jsx("div",{className:"space-y-6",children:t?e.jsx("p",{className:"text-center text-gray-500 dark:text-white/50",children:"Đang tải dữ liệu..."}):e.jsxs(k,{title:"Chi tiết giao dịch",actions:[{actionName:"Cập nhật",action:h,icon:e.jsx("i",{className:"fa-solid fa-pencil"})}],children:[e.jsx(C,{transaction:o}),e.jsx(M,{transaction:o})]})})}),e.jsx(v,{isOpen:m,onClose:i,className:"max-w-[700px] m-4",children:e.jsxs("div",{className:"relative w-full p-4 overflow-y-auto bg-white no-scrollbar rounded-3xl dark:bg-gray-900 lg:p-11",children:[e.jsx("div",{className:"px-2 pr-14",children:e.jsxs("h4",{className:"mb-6 text-2xl font-semibold text-gray-800 dark:text-white/90",children:["Cập nhật thông tin tài khoản: ",l]})}),e.jsxs("form",{className:"flex flex-col",children:[e.jsx("div",{className:"px-2 overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"gap-x-6 gap-y-5 lg:grid-cols-2",children:e.jsxs("div",{children:[e.jsx(E,{children:"Tên tài khoản"}),e.jsx(w,{type:"text",value:p,onChange:r=>u(r.target.value)})]})})}),e.jsxs("div",{className:"flex items-center gap-3 px-2 mt-6 lg:justify-end",children:[e.jsx(c,{size:"sm",variant:"outline",onClick:i,children:"Hủy"}),e.jsx(c,{size:"sm",onClick:g,children:"Lưu"})]})]})]})})]})}export{G as default};
